Понятия предметной области
==========================

(+) Пункт отправления
(+) Пункт назначения
(essence)    Рейс
(+) Номер рейса
Порядок прохождения станций
(essence)    Расписание рейсов
(+) Время отправления рейса
(+) Время остановки на промежуточной станции
(+) Время стоянки на станции
(+) Время прибытия в пункт назначения
(essence)    Маршрут
(essence)    Ж/д станция


(essence)    Билет
(+) Время посадки
(+) Пункт посадки
(+) Время высадки
(+) Пункт высадки
(+) Цена билета
(+) Возврат билета
(not need)   Return ticket
(not need)   One-way ticket
Нумерованные и ненумерованные места

(essence)    Поездной состав (rake) - набор вагонов входящих в состав
Дополнительные вагоны - прицепляемые/отцепляемые где-нибудь посередине рейса
(essence)    Вагон
(essence)    Человеко-Место
Сидячее место
Плацкарт
Номер вагона в составе
Номер места в вагоне

Типы вагонов:
 - Мягкий вагон
 - Купейный вагон
 - Сидячий вагон
 - Общий вагон
 - Вип вагон

(essence)    Тариф
Правила формирования тарифа могут зависить от
    Расстояние
    Скорости перемещения подвижного состава
    Типа места
(essence)    Доп опции
        - чай с сахаром
        - постельное белье
        - чистое постельное белье
        - задушевный разговор под водочку
        - страховки
        - Билеты на провоз багажа
        - услуга перевоза животных
(essence) Обязательные сборы
        - госпошлина на проезд в поезде

Возможность к разным поездам прицепить разные правила формирования тарифа?
(essence) Скидки для разных категорий граждан (дети/пенсионеры/инвалиды/ветераны)


Допущения:
==========

Цена запрашивается у внешних сервисов (логику ценообразования реализовывать не надо)

Маршруты возвратных поездов разбиваются на 2 маршрута - если поезд едит из A в B
и потом возвращается в A считаем это двумя разными маршрутами A->B и B->A

Typical queries
===============

1. Поиск рейсов из пункта A в пункт Б
    - с указанием диапазона дат отправления
    - с указанием диапазона дат прибытия
3. Список вагонов имеющих свободные места с указанием номера рейса
    пунка посадки А и высадки Б
2. Поиск свободных мест на рейс N

Сущности
========

Маршрут
-------

Ж/д станция
  - название станции
  - название населенного пункта

Маршрут
  - название маршрута (Москва-Владивосток экпресс)

Элемент маршрута
  - маршрут (fk)
  - ж/д станция
  - время в пути от начала маршрута
  - время стоянки

Расписание рейсов
-----------------

Рейс
  - наименование поезда (номер поезда)
  - время отправления
  - маршрут (fk)

Вагон
  - рейс (fk)
  - номер вагона в составе
  - тип вагона (fk)
  - пункт прицепления (fk элемент маршрута) [Условие консистентности рейс.маршрут == пункт_прицепления.маршрут]
  - пункт отцепления (fk элемент маршрута) [Условие консистентности рейс.маршрут == пункт_прицепления.маршрут]

Тип вагона
  - код (общий, плацкарт, мягкий вагон)
  - количество мест

Билеты и платежная инфа
-----------------------

Билет
  - вагон (фк)
  - ж/д станция посадки (fk пункт маршрута) [станция_посадки.маршрут == рейс.маршрут]
  - ж/д станция высадки (fk пункт маршрута) [станция_высадки.маршрут == рейс.маршрут]
  - цена билета
  - отменен (флаг)
